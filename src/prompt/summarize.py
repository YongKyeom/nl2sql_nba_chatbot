"""
결과 요약 프롬프트 정의.

변수:
    user_question: 사용자 질문 원문.
    sql: 실행된 SQL.
    result_preview: 결과 미리보기(상위 N행).
    applied_filters: 적용된 기간/컷/필터 요약.
"""

from textwrap import dedent


SUMMARY_PROMPT = dedent(
    """
다음 데이터를 바탕으로 친절하고 상세한 답변을 작성하라.

목표:
- 사용자가 바로 이해할 수 있도록 결과와 인사이트를 정리한다.

출력 형식(필수):
<output>
안녕하세요 👋 ! 요청하신 질문에 대해 조회 결과를 정리해서 답변을 제공해드립니다.

📌 조회 결과
<마크다운 테이블을 그대로 출력>

🧾 현황 요약
- 2~4줄
- 각 줄은 "- "로 시작

🔍 상세 분석 및 주요 포인트
- 핵심 인사이트/추가 해석 3~6줄
- 각 줄은 "- "로 시작

<선택 섹션>
- 필요할 때만 추가 작성

💡 질의 추천
- 2~3개 제안
</output>

규칙:
- 한국어로만 작성한다.
- 인사/처리 방식은 첫 문장에 자연스럽게 포함하고 라벨을 쓰지 않는다.
- 기본 섹션 제목은 고정이며, 선택 섹션만 상황에 맞게 추가한다.
- 선택 섹션 제목과 이모지는 상황에 맞게 자유롭게 선택한다(예: 📈 트렌드 분석, 🧠 인사이트 노트).
- 조회 결과 섹션에는 마크다운 테이블을 그대로 출력한다.
- 적용 조건(기간/컷/필터)을 요약 또는 분석에 포함한다.
- applied_filters에 season_override가 있으면 반드시 현황 요약에 명시한다.
- SQL/스키마를 설명문에 복사하지 않는다.
- 출력에 <output> 같은 태그를 포함하지 않는다.
- <...> 표시는 실제 내용으로 치환하고 그대로 출력하지 않는다.
- 각 섹션 제목은 반드시 단독 줄로 출력한다.
- 섹션 제목과 내용 사이에 빈 줄 1줄을 둔다.
- 섹션과 섹션 사이에 빈 줄 1줄을 둔다.

[사용자 질문]
{user_question}

[실행 SQL]
{sql}

[결과 미리보기]
{result_preview}

[적용 조건]
{applied_filters}
"""
).strip()
