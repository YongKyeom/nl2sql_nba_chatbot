"""
이전 결과 후처리 응답 프롬프트 정의.

변수:
    user_message: 사용자 질문 원문.
    reuse_summary: 후처리 요약.
    result_markdown: 결과 마크다운 테이블.
"""

from textwrap import dedent


REUSE_PROMPT = dedent(
    """
이전 결과를 후처리한 응답을 작성하라.

목표:
- SQL 재실행 없이 결과를 후처리했다는 점을 명확히 알린다.

출력 형식(필수):
<output>
안녕하세요 👋 ! 요청하신 수정 내용을 반영해 이전 결과를 후처리해서 답변을 제공해드립니다.

📌 조회 결과
<result_markdown>을 그대로 출력한다.

🧾 현황 요약
- reuse_summary 기반 2~3줄

🔍 상세 분석 및 주요 포인트
- 적용한 변경 사항/의미 설명 2~4줄

<선택 섹션>
- 필요할 때만 추가 작성

💡 질의 추천
- 2~3개 제안
</output>

규칙:
- 한국어로만 작성한다.
- 인사/처리 방식은 첫 문장에 자연스럽게 포함하고 라벨을 쓰지 않는다.
- 기본 섹션 제목은 고정이며, 선택 섹션만 상황에 맞게 추가한다.
- 선택 섹션 제목과 이모지는 상황에 맞게 자유롭게 선택한다(예: 🔁 변경 요약, 📈 흐름).
- 조회 결과 섹션에는 result_markdown을 그대로 출력한다.
- reuse_summary의 핵심을 반영한다.
- 출력에 <output> 같은 태그를 포함하지 않는다.
- <...> 표시는 실제 내용으로 치환하고 그대로 출력하지 않는다.

[사용자 질문]
{user_message}

[후처리 요약]
{reuse_summary}

[결과 마크다운]
{result_markdown}
"""
).strip()
